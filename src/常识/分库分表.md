
# 分库+分表
分库：一个数据库包括多张表，造成数据库过于庞大。把一个数据库拆成若干个数据库。这样一来，外键约束就不能用了。  
分表：一个表中存储的行数过多，造成单表过大。可以进行水平切分和垂直切分。垂直切分就是竖着切一刀，是把大表中的列分成若干组，每组是一个表。水平切分就是横着来一刀，是根据数据中的某一列进行切分（此列被称为sharding column），其实就相当于把数据的某个键切分成了若干个区间。每个区间是一个表。    

# sharding column与冗余存储
分库分表会使得查询变得非常复杂。例如考虑用户关系表，这个表有三个字段id，from_user,to_user，表示from_user关注了to_user。如果按照from_user进行分表，那么可以快速获取某个用户的关注列表，然而却无法获得用户的粉丝列表（需要枚举全部表并拼接起来，分表的意义大打折扣）；如果按照to_user进行分表，能够获取用户的粉丝列表，却无法快速获得用户的关注列表。  
那么如何解决这个问题呢？冗余存储。按照from_user分表一次，然后按照to_user分表一次。  


# OLTP与OLAP的介绍
数据处理大致可以分成两大类：联机事务处理OLTP（on-line transaction processing）、联机分析处理OLAP（On-Line Analytical Processing）。OLTP是传统的关系型数据库的主要应用，主要是基本的、日常的事务处理，例如银行交易。OLAP是数据仓库系统的主要应用，支持复杂的分析操作，侧重决策支持，并且提供直观易懂的查询结果。 
* OLTP 系统强调数据库内存效率，强调内存各种指标的命令率，强调绑定变量，强调并发操作；
* OLAP 系统则强调数据分析，强调SQL执行市场，强调磁盘I/O，强调分区等。 

# 数据库查询时join的几种方式
* inner join：左右取交集
* left join：以左边为准
* right join: 以右边为准
* outter join:左右取并集

默认是inner join


# B+树与hash的区别
B+ Tree索引和Hash索引区别
* 哈希索引适合等值查询，但是不无法进行范围查询
* 哈希索引没办法利用索引完成排序
* 哈希索引不支持多列联合索引的最左匹配规则 
* 如果有大量重复键值得情况下，哈希索引的效率会很低，因为存在哈希碰撞问题

# 聚簇索引、联合索引、覆盖索引
联合索引节省空间，但浪费时间。主键索引是聚簇索引，非主键索引是联合索引。在非主键索引的B+树上直接存储记录信息，就可以避免再次查询，这叫覆盖索引。  


# 创建索引的注意事项
* 对于取值较少的字段不要建立索引
* 建立多字段索引的时候注意顺序，把区分度高的字段放在前面能够提高效率
* 